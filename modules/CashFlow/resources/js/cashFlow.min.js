$(document).ready(function(){function u(){var t=$("#anoSelect").val();s.empty();o.empty();$.ajax({type:"POST",url:"modules/CashFlow/php/loadExpenses.php",data:{ano:t,userId:e},success:function(e){$(s).append(e)}});$.ajax({type:"POST",url:"modules/CashFlow/php/loadIncomes.php",data:{ano:t,userId:e},success:function(e){$(o).append(e)}})}function a(){s.empty();o.empty();var t="";$.ajax({type:"POST",url:"modules/CashFlow/php/loadExpenses.php",data:{ano:t,userId:e},success:function(e){$(s).append(e)}});$.ajax({type:"POST",url:"modules/CashFlow/php/loadIncomes.php",data:{ano:t,userId:e},success:function(e){$(o).append(e)}})}var e=$("input[name=userId]").val();var t=$("select[name=expenseCategory]");var n=$("select[name=incomeCategory]");var r=$("#showExpense");var i=$(".expenseBox");var s=$("#listExpenses");var o=$("#listIncomes");a();$("#addExpenseForm").hide();$("#addIncomeForm").hide();$("#addCategoryForm").hide();$(".categoryMsgError").hide();$(".categoryMsgSuccess").hide();$(".expenseAddSuccess").hide();$(".incomeAddSuccess").hide();$("#data").datepicker({altFormat:"dd/mm/yyy",dateFormat:"dd/mm/yy",showOtherMonths:true,selectOtherMonths:true,changeMonth:true,changeYear:true});$("#incomeDate").datepicker({altFormat:"dd/mm/yyy",dateFormat:"dd/mm/yy",showOtherMonths:true,selectOtherMonths:true,changeMonth:true,changeYear:true});$("#txtIncomeValue").maskMoney({showSymbol:true,symbol:"R$",decimal:",",thousands:"."});$("#txtExpenseValue").maskMoney({showSymbol:true,symbol:"R$",decimal:",",thousands:".",precision:2});$("#anoSelect").change(function(){var t=$("#anoSelect").val();s.empty();$.ajax({type:"POST",url:"modules/CashFlow/php/loadExpenses.php",data:{ano:t,userId:e},success:function(e){$(s).append(e)}})});$("#anoSelect").change(function(){var t=$("#anoSelect").val();o.empty();$.ajax({type:"POST",url:"modules/CashFlow/php/loadIncomes.php",data:{ano:t,userId:e},success:function(e){$(o).append(e)}})});$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategories.php",data:{userId:e},success:function(e){var r=$.parseJSON(e);for(var i=0;i<r.length;i++){if(r[i].categoryTypeId==1){t.append("<option value = "+r[i].id+">"+r[i].categoryName+"</option>")}else{n.append("<option value = "+r[i].id+">"+r[i].categoryName+"</option>")}}}});$("#addExpense").on("click",function(){$("#addExpenseForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})});$("#btnAddExpense").on("click",function(){var t=$("#txtExpenseName").val();var n=$("#anoSelect").val();var r=$("#txtExpenseValue").val();var i=$("select[name=expenseCategory]").find(":selected").val();$.ajax({type:"POST",url:"modules/CashFlow/php/addExpense.php",data:{userId:e,expenseName:t,expenseValue:r,ano:n,category:i},success:function(e){if(e==1){$(".expenseAddSuccess").show();u()}}})});$("#addIncome").on("click",function(){$("#addIncomeForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})});$("#btnAddIncome").on("click",function(){var t=$("#txtIncomeName").val();var n=$("#anoSelect").val();var r=$("#txtIncomeValue").val();var i=$("select[name=incomeCategory]").find(":selected").val();$.ajax({type:"POST",url:"modules/CashFlow/php/addIncome.php",data:{userId:e,incomeName:t,incomeValue:r,ano:n,category:i},success:function(e){if(e==1){$(".incomeAddSuccess").show();u()}}})});$("#addCategory").on("click",function(){$("#addCategoryForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})});$("#btnAddCategory").on("click",function(){var r=$("#txtCategoryName").val();var i=$("input[name=categoryType]:checked").val();$.ajax({type:"POST",url:"modules/CashFlow/php/addCategory.php",data:{userId:e,categoryName:r,categoryTypeId:i},success:function(e){if(e==2){$(".categoryMsgError").show();$(".categoryMsgSuccess").hide()}else{t.empty();n.empty();$(".categoryMsgError").hide();$(".categoryMsgSuccess").show();var r=$.parseJSON(e);for(var i=0;i<r.length;i++){if(r[i].categoryTypeId==1){t.append("<option value = "+r[i].id+">"+r[i].categoryName+"</option>")}else{n.append("<option value = "+r[i].id+">"+r[i].categoryName+"</option>")}}}}})});$("#btnCancelExpenseForm").on("click",function(){$("#addExpenseForm").dialog("destroy")});$("#btnCancelCategoryForm").on("click",function(){$("#addCategoryForm").dialog("destroy")});$("#btnCancelIncomeForm").on("click",function(){$("#addIncomeForm").dialog("destroy")})})