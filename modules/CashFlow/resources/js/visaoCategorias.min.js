$(document).ready(function(){function e(){o.empty(),t.empty();var e="";$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesExpenses.php",data:{ano:e,userId:s},success:function(e){$(o).append(e)}}),$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesIncomes.php",data:{ano:e,userId:s},success:function(e){$(t).append(e)}})}function a(){o.empty(),t.empty();var e=$("#anoSelect").val();$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesExpenses.php",data:{ano:e,userId:s},success:function(e){$(o).append(e)}}),$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesIncomes.php",data:{ano:e,userId:s},success:function(e){$(t).append(e)}})}var o=($("select[name=expenseCategory]"),$("select[name=incomeCategory]"),$("#listCategoriesExpenses")),t=$("#listCategoriesIncomes");$("#addCategoryForm").hide(),$("#deleteDialog").hide(),$(".categoryMsgError").hide(),$(".displayError").hide(),$(".categoryMsgSuccess").hide();var s=$("input[name=userId]").val();e(),$("#anoSelect").val((new Date).getFullYear()).attr("selected"),$(document).ajaxStart(function(){$(".loader").show()}),$(document).ajaxStop(function(){$(".loader").hide()}),$("#addCategory").on("click",function(){$("#formAddCategory")[0].reset(),$(".categoryMsgSuccess").hide(),$(".categoryMsgError").hide(),$(".displayError").hide(),$("#txtCategoryName").removeClass("redBorder"),$("#addCategoryForm").dialog({modal:!0,show:{effect:"slideDown",duration:600},width:500})}),$("#btnCancelCategoryForm").on("click",function(){$("#addCategoryForm").dialog("destroy")}),$("#listCategoriesExpenses, #listCategoriesIncomes").on("click","tr:not(:last-child)",function(){$(this).hasClass("highlighted")?$(this).removeClass("highlighted"):$(this).addClass("highlighted")}),$("#btnAddCategory").on("click",function(){var e=$("#txtCategoryName").val(),r=$("input[name=categoryType]:checked").val(),d=$("#anoSelect").val();""==e?($("#txtCategoryName").addClass("redBorder"),$(".categoryMsgSuccess").hide(),$(".categoryMsgError").hide(),$(".displayError").show()):$.ajax({type:"POST",url:"modules/CashFlow/php/addCategory.php",data:{userId:s,categoryName:e,categoryTypeId:r,ano:d},success:function(e){2==e?($(".categoryMsgError").show(),$(".categoryMsgSuccess").hide(),$(".displayError").hide()):(o.empty(),t.empty(),$(".categoryMsgError").hide(),$(".categoryMsgSuccess").show(),$(".displayError").hide(),a())}})}),$("#anoSelect").change(function(){var e=$("#anoSelect").val();t.empty(),$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesIncomes.php",data:{ano:e,userId:s},success:function(e){$(t).append(e)}})}),$("#anoSelect").change(function(){var e=$("#anoSelect").val();o.empty(),$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesExpenses.php",data:{ano:e,userId:s},success:function(e){$(o).append(e)}})}),$("#removeCategory").on("click",function(){{var e=0,a=[];$("#anoSelect").val()}$(".highlighted").each(function(){a[e]=$(this).attr("id"),e++}),a.length>0?$("#deleteDialog").dialog({resizable:!1,height:140,width:500,modal:!0,buttons:{Sim:function(){var e=0,a=[];$(".highlighted").each(function(){$(this).remove(),a[e]=$(this).attr("id"),e++}),$.ajax({type:"POST",url:"modules/CashFlow/php/deletaCategorias.php",data:{categories:a,userId:s},success:function(){}}),$(this).dialog("close")},Cancelar:function(){$(this).dialog("close")}}}):$("#deleteDialogSelected").dialog({modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})})});