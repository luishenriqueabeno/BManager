$(document).ready(function(){function s(){n.empty();r.empty();var e="";$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesExpenses.php",data:{ano:e,userId:i},success:function(e){$(n).append(e)}});$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesIncomes.php",data:{ano:e,userId:i},success:function(e){$(r).append(e)}})}function o(){n.empty();r.empty();var e=$("#anoSelect").val();$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesExpenses.php",data:{ano:e,userId:i},success:function(e){$(n).append(e)}});$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesIncomes.php",data:{ano:e,userId:i},success:function(e){$(r).append(e)}})}var e=$("select[name=expenseCategory]");var t=$("select[name=incomeCategory]");var n=$("#listCategoriesExpenses");var r=$("#listCategoriesIncomes");$("#addCategoryForm").hide();$("#deleteDialog").hide();$(".categoryMsgError").hide();$(".displayError").hide();$(".categoryMsgSuccess").hide();var i=$("input[name=userId]").val();s();$("#anoSelect").val((new Date).getFullYear()).attr("selected");$(document).ajaxStart(function(){$(".loader").show()});$(document).ajaxStop(function(){$(".loader").hide()});$("#addCategory").on("click",function(){$("#formAddCategory")[0].reset();$(".categoryMsgSuccess").hide();$(".categoryMsgError").hide();$(".displayError").hide();$("#txtCategoryName").removeClass("redBorder");$("#addCategoryForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})});$("#btnCancelCategoryForm").on("click",function(){$("#addCategoryForm").dialog("destroy")});$("#listCategoriesExpenses, #listCategoriesIncomes").on("click","tr:not(:last-child)",function(){if($(this).hasClass("highlighted")){$(this).removeClass("highlighted")}else{$(this).addClass("highlighted")}});$("#btnAddCategory").on("click",function(){var e=$("#txtCategoryName").val();var t=$("input[name=categoryType]:checked").val();var s=$("#anoSelect").val();if(e==""){$("#txtCategoryName").addClass("redBorder");$(".categoryMsgSuccess").hide();$(".categoryMsgError").hide();$(".displayError").show()}else{$.ajax({type:"POST",url:"modules/CashFlow/php/addCategory.php",data:{userId:i,categoryName:e,categoryTypeId:t,ano:s},success:function(e){if(e==2){$(".categoryMsgError").show();$(".categoryMsgSuccess").hide();$(".displayError").hide()}else{n.empty();r.empty();$(".categoryMsgError").hide();$(".categoryMsgSuccess").show();$(".displayError").hide();$("#formAddCategory")[0].reset();$("#txtCategoryName").removeClass("greenBorder");o()}}})}});$("#anoSelect").change(function(){var e=$("#anoSelect").val();r.empty();$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesIncomes.php",data:{ano:e,userId:i},success:function(e){$(r).append(e)}})});$("#anoSelect").change(function(){var e=$("#anoSelect").val();n.empty();$.ajax({type:"POST",url:"modules/CashFlow/php/loadCategoriesExpenses.php",data:{ano:e,userId:i},success:function(e){$(n).append(e)}})});$("#removeCategory").on("click",function(){var e=0;var t=[];var n=$("#anoSelect").val();$(".highlighted").each(function(){t[e]=$(this).attr("id");e++});if(t.length>0){$("#deleteDialog").dialog({resizable:false,height:140,width:500,modal:true,buttons:{Sim:function(){var e=0;var t=[];$(".highlighted").each(function(){$(this).remove();t[e]=$(this).attr("id");e++});$.ajax({type:"POST",url:"modules/CashFlow/php/deletaCategorias.php",data:{categories:t,userId:i},success:function(e){o()}});$(this).dialog("close")},Cancelar:function(){$(this).dialog("close")}}})}else{$("#deleteDialogSelected").dialog({modal:true,buttons:{Ok:function(){$(this).dialog("close")}}})}})})