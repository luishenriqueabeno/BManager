$(document).ready(function(){$("#addUserForm").hide(),$("#loginForm").hide(),$("#forgotPassForm").hide(),$("#passError").hide(),$("#passSend").hide(),$("#txtPassword2").attr("disabled",!0);var e=($("#txtPassword1"),$("#txtPassword2"),$("#txtEmail")),r=$("#txtFirstName"),s=$("#txtLastName"),a=($("#txtUsername"),$("#txtPassword"),$("#txtUsernameRecover")),o=0,d=!0,t=$(".firstNameReq"),l=$(".lastNameReq"),n=$(".emailReq"),i=$(".emailReqForgot"),m=$(".pass1"),c=$(".pass2");$("#addUserModal").click(function(){$("#addUserForm").dialog({modal:!0,show:{effect:"slideDown",duration:600},width:500})}),$("#loginUserModal").click(function(){$("#loginForm").dialog({modal:!0,show:{effect:"slideDown",duration:600},width:500})}),$("#forgotPass").click(function(){$("#loginForm").dialog("destroy"),$("#formForgotPass").dialog({modal:!0,show:{effect:"slideDown",duration:600},width:500})}),$("#btnCancelUserForm").on("click",function(){$("#addUserForm").dialog("destroy")}),$("#btnCancelLoginForm").on("click",function(){$("#loginForm").dialog("destroy")}),$("#btnCancelForgotpassForm").on("click",function(){$("#formForgotPass").dialog("destroy")}),$("#btnAddUser").click(function(){var a=$("#txtFirstName").val(),t=$("#txtLastName").val(),l=$("#txtEmail").val(),n=$("#txtPassword1").val(),i=$("#txtPassword2").val(),m=$("#gender").val(),c=$("#product").val();n.hasClass("redBorder")||i.hasClass("redBorder")||e.hasClass("redBorder")||r.hasClass("redBorder")||s.hasClass("redBorder")?d&&($("#formMessage").append("Corrija os campos destacados").css("color","red"),d=!1):$.ajax({type:"POST",url:"php/addUser.php",data:{firstName:a,lastName:t,email:l,password1:n,product:c,gender:m},success:function(){0==o&&($("#formMessage").remove(),$("#formMessageSuccess").append("Usuário cadastrado com sucesso").css("color","green"),$("#formMessageSuccess").append("<a href = '#' id = 'loginLink' class = 'loginLink'>Login </a>"),o=1,$("#formAddTask")[0].reset(),n.removeClass("greenBorder"),i.removeClass("greenBorder"),r.removeClass("greenBorder"),s.removeClass("greenBorder"),e.removeClass("greenBorder")),$("#loginLink").on("click",function(){$("#addUserForm").dialog("destroy"),$("#loginForm").dialog({modal:!0,show:{effect:"slideDown",duration:600},width:500})})}})}),$("#btnLogin").click(function(){var e=$("#txtUsername").val(),r=$("#txtPassword").val();$.ajax({url:"php/logon.php",type:"POST",data:{username:e,password:r},success:function(e){$("#loginForm").dialog("destroy"),1==e[0]?window.location.href="home.php":alert("Usuário e/ou senha incorreto.")}})}),$("#btnRecoverPass").on("click",function(){var e=$("#txtUsernameRecover").val();a.hasClass("greenBorder")&&$.ajax({type:"POST",data:{email:e},url:"php/forgotPass.php",success:function(e){1==e?($("#passError").show(),$("#passSend").hide()):($("#passSend").show(),$("#passError").hide())}})}),$("#txtPassword1").keyup(function(){var e=$("#txtPassword1").val();e.length<6||""==e?(e.addClass("redBorder"),m.html("A senha deve ter no mínimo 6 caracteres")):(e.removeClass("redBorder").addClass("greenBorder"),$("#txtPassword2").attr("disabled",!1),m.html(""))}),$("#txtPassword2").keyup(function(){var e=$("#txtPassword1").val(),r=$("#txtPassword2").val();r.length<6?(r.addClass("redBorder"),c.html("As senhas não coincidem")):e!=r?(e.addClass("redBorder"),r.addClass("redBorder"),c.html("As senhas não coincidem")):(e.removeClass("redBorder").addClass("greenBorder"),r.removeClass("redBorder").addClass("greenBorder"),c.html(""))}),$("#txtEmail").keyup(function(){var r=$(this).val(),s=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;s.test(r)?(e.removeClass("redBorder").addClass("greenBorder"),n.html("")):(e.addClass("redBorder"),n.html("Email inválido").css("margin-left","-80px"))}),$("#txtUsernameRecover").keyup(function(){var e=$(this).val(),r=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;r.test(e)?(a.removeClass("redBorder").addClass("greenBorder"),i.html("")):(a.addClass("redBorder"),i.html("Email inválido").css("margin-left","-80px"))}),$("#txtEmail").focusout(function(){var r=$(this).val();""==$(this).val()?(e.addClass("redBorder"),n.html("Campo obrigatório")):$.ajax({url:"php/checkUser.php",type:"POST",data:{email:r},success:function(r){1==r?(e.addClass("redBorder"),n.html("Este email já esta sendo usado").css("margin-left","-180px")):(e.removeClass("redBorder").addClass("greenBorder"),n.html(""))}})}),$("#txtFirstName").focusout(function(){var e=$("#txtFirstName").val();""==e?(r.addClass("redBorder"),t.html("Campo obrigatório")):(r.removeClass("redBorder").addClass("greenBorder"),t.html(""))}),$("#txtLastName").focusout(function(){var e=$("#txtLastName").val();""==e?(s.addClass("redBorder"),l.html("Campo obrigatório")):(s.removeClass("redBorder").addClass("greenBorder"),l.html(""))})});