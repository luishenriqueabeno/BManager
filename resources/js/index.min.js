$(document).ready(function(){$("#addUserForm").hide();$("#loginForm").hide();$("#forgotPassForm").hide();$("#passError").hide();$("#passSend").hide();$("#logonMessage").hide();$("#txtPassword2").attr("disabled",true);var e=$("#txtPassword1");var t=$("#txtPassword2");var n=$("#txtEmail");var r=$("#txtFirstName");var i=$("#txtLastName");var s=$("#txtUsername");var o=$("#txtPassword");var u=$("#txtUsernameRecover");var a=0;var f=true;var l=$(".firstNameReq");var c=$(".lastNameReq");var h=$(".emailReq");var p=$(".emailReqForgot");var d=$(".pass1");var v=$(".pass2");$("#addUserModal").click(function(){$("#addUserForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})});$("#loginUserModal").click(function(){$("#logonMessage").hide();$("#formLogin")[0].reset();$("#loginForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})});$("#forgotPass").click(function(){$("#loginForm").dialog("destroy");$("#formForgotPass").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500,title:"Recuperar senha"})});$("#btnCancelUserForm").on("click",function(){$("#addUserForm").dialog("destroy")});$("#btnCancelLoginForm").on("click",function(){$("#loginForm").dialog("destroy")});$("#btnCancelForgotpassForm").on("click",function(){$("#formForgotPass").dialog("destroy")});$("#btnAddUser").click(function(){var s=$("#txtFirstName").val();var o=$("#txtLastName").val();var u=$("#txtEmail").val();var l=$("#txtPassword1").val();var c=$("#txtPassword2").val();var h=$("#gender").val();var p=$("#product").val();if(e.hasClass("redBorder")||t.hasClass("redBorder")||n.hasClass("redBorder")||r.hasClass("redBorder")||i.hasClass("redBorder")){if(f){$("#formMessage").append("Corrija os campos destacados").css("color","red");f=false}}else{$.ajax({type:"POST",url:"php/addUser.php",data:{firstName:s,lastName:o,email:u,password1:l,product:p,gender:h},success:function(s){if(a==0){$("#formMessage").remove();$("#formMessageSuccess").append("Usuário cadastrado com sucesso").css("color","green");$("#formMessageSuccess").append("<a href = '#' id = 'loginLink' class = 'loginLink'>Login </a>");a=1;$("#formAddTask")[0].reset();e.removeClass("greenBorder");t.removeClass("greenBorder");r.removeClass("greenBorder");i.removeClass("greenBorder");n.removeClass("greenBorder")}$("#loginLink").on("click",function(){$("#addUserForm").dialog("destroy");$("#loginForm").dialog({modal:true,show:{effect:"slideDown",duration:600},width:500})})}})}});$("#btnLogin").click(function(){var e=$("#txtUsername").val();var t=$("#txtPassword").val();$.ajax({url:"php/logon.php",type:"POST",data:{username:e,password:t},success:function(e){if(e[0]==1){window.location.href="home.php"}else{$("#logonMessage").show()}}})});$("#btnRecoverPass").on("click",function(){var e=$("#txtUsernameRecover").val();if(u.hasClass("greenBorder")){$.ajax({type:"POST",data:{email:e},url:"php/forgotPass.php",success:function(e){if(e==1){$("#passError").show();$("#passSend").hide()}else{$("#passSend").show();$("#passError").hide()}}})}});$("#txtPassword1").keyup(function(){var t=$("#txtPassword1").val();if(t.length<6||t==""){e.addClass("redBorder");d.html("A senha deve ter no mínimo 6 caracteres");$("#txtPassword2").attr("disabled",true)}else{e.removeClass("redBorder").addClass("greenBorder");$("#txtPassword2").attr("disabled",false);d.html("")}});$("#txtPassword2").keyup(function(){var n=$("#txtPassword1").val();var r=$("#txtPassword2").val();if(r.length<6){t.addClass("redBorder");v.html("As senhas não coincidem")}else if(n!=r){e.addClass("redBorder");t.addClass("redBorder");v.html("As senhas não coincidem")}else{e.removeClass("redBorder").addClass("greenBorder");t.removeClass("redBorder").addClass("greenBorder");v.html("")}});$("#txtEmail").keyup(function(){var e=$(this).val();var t=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;if(t.test(e)){n.removeClass("redBorder").addClass("greenBorder");h.html("")}else{n.addClass("redBorder");h.html("Email inválido").css("margin-left","-80px")}});$("#txtUsernameRecover").keyup(function(){var e=$(this).val();var t=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;if(t.test(e)){u.removeClass("redBorder").addClass("greenBorder");p.html("")}else{u.addClass("redBorder");p.html("Email inválido").css("margin-left","-80px")}});$("#txtEmail").focusout(function(){var e=$(this).val();if($(this).val()==""){n.addClass("redBorder");h.html("Campo obrigatório")}else{$.ajax({url:"php/checkUser.php",type:"POST",data:{email:e},success:function(e){if(e==1){n.addClass("redBorder");h.html("Este email já esta sendo usado").css("margin-left","-180px")}else{n.removeClass("redBorder").addClass("greenBorder");h.html("")}}})}});$("#txtFirstName").focusout(function(){var e=$("#txtFirstName").val();if(e==""){r.addClass("redBorder");l.html("Campo obrigatório")}else{r.removeClass("redBorder").addClass("greenBorder");l.html("")}});$("#txtLastName").focusout(function(){var e=$("#txtLastName").val();if(e==""){i.addClass("redBorder");c.html("Campo obrigatório")}else{i.removeClass("redBorder").addClass("greenBorder");c.html("")}})})